<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Prebid Test</title>
  <script>
  window.googletag = window.googletag || {};
  window.googletag.cmd = window.googletag.cmd || [];
  window.pbjs = window.pbjs || {};
  window.pbjs.que = window.pbjs.que || [];

  </script>
  <script>
    var tag = document.createElement('script');
    tag.type = 'text/javascript';
    tag.src = '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(tag, node);
  </script>
  <script src="/prebid.js"></script>
  <script>
    googletag.cmd.push(function() {

      googletag.defineSlot('///', [[728,90], [970,90]], 'atf-970-flex').addService(googletag.pubads());
      googletag.defineSlot('///', [[300,250]], 'atf-300-post').addService(googletag.pubads());
      googletag.defineSlot('///', [[300,250]], 'atf-300').addService(googletag.pubads());

      googletag.pubads().disableInitialLoad();
      googletag.enableServices();
    });

    window.adUnits = [{
    // ATF Desktop Only
        code: 'atf-970-flex',
        mediaTypes: {
            banner: {
                sizes: [[728, 90], [970, 90]],
            }
        },
        bids: [
          {
            bidder: 'htl',
            params: {
              placementId: 'atf-970-flex',
            }
          },
        ]
      },
      {
        // ATF Mobile Only
        code: 'atf-300-post',
        mediaTypes: {
          banner: {
            sizes: [[300, 250]],
          }
        },
        bids: [
          {
            bidder: 'htl',
            params: {
              placementId: 'atf-300-post',
            }
          }
        ]
      },
      {
        code: 'atf-300',
        mediaTypes: {
          banner: {
            sizes: [[300, 250]],
          }
        },
        bids: [{
          bidder: 'htl',
          params: {
            placementId: 'atf-300',
          }
        }]
      }
    ];

    pbjs.que.push(function() {

      pbjs.addAdUnits(adUnits);
      pbjs.requestBids({
        bidsBackHandler: () => {
          googletag.cmd.push(function() {
            pbjs.setTargetingForGPTAsync();
            googletag.pubads().refresh();
          });
        },
      });
    });


  </script>
</head>
<body>
  <p>
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas fugiat doloribus, reprehenderit repudiandae corrupti et a aspernatur quae molestiae asperiores similique velit aliquid adipisci culpa? Porro rem dolorum dolores velit!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam aliquid molestias autem commodi provident consequatur est voluptates illum eveniet expedita accusantium reprehenderit itaque soluta aut amet voluptas praesentium, quasi excepturi.
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Qui, ratione minima illo perferendis natus nam maxime numquam obcaecati nisi! Vitae blanditiis nam voluptatem beatae a veniam illum, mollitia ab sapiente.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam quas iure, possimus neque maiores hic perspiciatis asperiores sed numquam dolores recusandae quasi soluta necessitatibus pariatur dolore omnis architecto doloremque assumenda.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed quas totam, ad amet ipsum saepe iure maxime obcaecati mollitia consectetur nam non pariatur omnis excepturi recusandae accusantium soluta, inventore quam.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. At dolorum molestiae culpa similique! Molestiae aut quaerat voluptates velit excepturi doloremque dolores perferendis, voluptatum cupiditate placeat quam delectus quisquam atque ad?
  </p>
  <div id="atf-970-flex">
    <script>
      googletag.cmd.push(function() {
        googletag.display('atf-970-flex');
      });
    </script>
  </div>
  <p>
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas fugiat doloribus, reprehenderit repudiandae corrupti et a aspernatur quae molestiae asperiores similique velit aliquid adipisci culpa? Porro rem dolorum dolores velit!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam aliquid molestias autem commodi provident consequatur est voluptates illum eveniet expedita accusantium reprehenderit itaque soluta aut amet voluptas praesentium, quasi excepturi.
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Qui, ratione minima illo perferendis natus nam maxime numquam obcaecati nisi! Vitae blanditiis nam voluptatem beatae a veniam illum, mollitia ab sapiente.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam quas iure, possimus neque maiores hic perspiciatis asperiores sed numquam dolores recusandae quasi soluta necessitatibus pariatur dolore omnis architecto doloremque assumenda.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed quas totam, ad amet ipsum saepe iure maxime obcaecati mollitia consectetur nam non pariatur omnis excepturi recusandae accusantium soluta, inventore quam.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. At dolorum molestiae culpa similique! Molestiae aut quaerat voluptates velit excepturi doloremque dolores perferendis, voluptatum cupiditate placeat quam delectus quisquam atque ad?
  </p>
  <div id='atf-300-post'>
    <script>
      googletag.cmd.push(function() {
        googletag.display('atf-300-post');
      });
    </script>
  </div>
  <p>
    Lorem, ipsum dolor sit amet consectetur adipisicing elit. Voluptas fugiat doloribus, reprehenderit repudiandae corrupti et a aspernatur quae molestiae asperiores similique velit aliquid adipisci culpa? Porro rem dolorum dolores velit!
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam aliquid molestias autem commodi provident consequatur est voluptates illum eveniet expedita accusantium reprehenderit itaque soluta aut amet voluptas praesentium, quasi excepturi.
    Lorem ipsum, dolor sit amet consectetur adipisicing elit. Qui, ratione minima illo perferendis natus nam maxime numquam obcaecati nisi! Vitae blanditiis nam voluptatem beatae a veniam illum, mollitia ab sapiente.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Nam quas iure, possimus neque maiores hic perspiciatis asperiores sed numquam dolores recusandae quasi soluta necessitatibus pariatur dolore omnis architecto doloremque assumenda.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. Sed quas totam, ad amet ipsum saepe iure maxime obcaecati mollitia consectetur nam non pariatur omnis excepturi recusandae accusantium soluta, inventore quam.
    Lorem ipsum dolor sit amet consectetur adipisicing elit. At dolorum molestiae culpa similique! Molestiae aut quaerat voluptates velit excepturi doloremque dolores perferendis, voluptatum cupiditate placeat quam delectus quisquam atque ad?
  </p>
  <div id='atf-300'>
    <script>
      googletag.cmd.push(function() {
        googletag.display('atf-300');
      });
    </script>
  </div>
</body>
</html>